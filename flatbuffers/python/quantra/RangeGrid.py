# automatically generated by the FlatBuffers compiler, do not modify

# namespace: quantra

import flatbuffers
from flatbuffers.compat import import_numpy
np = import_numpy()

# Sample the curve between start/end with a step.
# Use this for "daily curve until X".
#
# Note on business_days_only: 
# - Requires a real calendar (not NullCalendar) to skip weekends/holidays
# - If business_days_only=true with NullCalendar, falls back to WeekendsOnly
class RangeGrid(object):
    __slots__ = ['_tab']

    @classmethod
    def GetRootAs(cls, buf, offset=0):
        n = flatbuffers.encode.Get(flatbuffers.packer.uoffset, buf, offset)
        x = RangeGrid()
        x.Init(buf, n + offset)
        return x

    @classmethod
    def GetRootAsRangeGrid(cls, buf, offset=0):
        """This method is deprecated. Please switch to GetRootAs."""
        return cls.GetRootAs(buf, offset)
    # RangeGrid
    def Init(self, buf, pos):
        self._tab = flatbuffers.table.Table(buf, pos)

    # If omitted, server defaults to as_of_date.
    # RangeGrid
    def StartDate(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(4))
        if o != 0:
            return self._tab.String(o + self._tab.Pos)
        return None

    # Required end date (YYYY-MM-DD or YYYY/MM/DD).
    # RangeGrid
    def EndDate(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(6))
        if o != 0:
            return self._tab.String(o + self._tab.Pos)
        return None

    # Step size, e.g. 1 Days for daily, 1 Weeks, 1 Months.
    # RangeGrid
    def StepNumber(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(8))
        if o != 0:
            return self._tab.Get(flatbuffers.number_types.Int32Flags, o + self._tab.Pos)
        return 1

    # RangeGrid
    def StepTimeUnit(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(10))
        if o != 0:
            return self._tab.Get(flatbuffers.number_types.Int8Flags, o + self._tab.Pos)
        return 0

    # If true, generate only business days using the calendar below.
    # Requires a non-NullCalendar to properly skip weekends/holidays.
    # RangeGrid
    def BusinessDaysOnly(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(12))
        if o != 0:
            return bool(self._tab.Get(flatbuffers.number_types.BoolFlags, o + self._tab.Pos))
        return False

    # Calendar used for business day checks and date advancement.
    # RangeGrid
    def Calendar(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(14))
        if o != 0:
            return self._tab.Get(flatbuffers.number_types.Int8Flags, o + self._tab.Pos)
        return 21

    # Business day convention used when adjusting generated dates.
    # RangeGrid
    def BusinessDayConvention(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(16))
        if o != 0:
            return self._tab.Get(flatbuffers.number_types.Int8Flags, o + self._tab.Pos)
        return 0

def RangeGridStart(builder):
    builder.StartObject(7)

def Start(builder):
    RangeGridStart(builder)

def RangeGridAddStartDate(builder, startDate):
    builder.PrependUOffsetTRelativeSlot(0, flatbuffers.number_types.UOffsetTFlags.py_type(startDate), 0)

def AddStartDate(builder, startDate):
    RangeGridAddStartDate(builder, startDate)

def RangeGridAddEndDate(builder, endDate):
    builder.PrependUOffsetTRelativeSlot(1, flatbuffers.number_types.UOffsetTFlags.py_type(endDate), 0)

def AddEndDate(builder, endDate):
    RangeGridAddEndDate(builder, endDate)

def RangeGridAddStepNumber(builder, stepNumber):
    builder.PrependInt32Slot(2, stepNumber, 1)

def AddStepNumber(builder, stepNumber):
    RangeGridAddStepNumber(builder, stepNumber)

def RangeGridAddStepTimeUnit(builder, stepTimeUnit):
    builder.PrependInt8Slot(3, stepTimeUnit, 0)

def AddStepTimeUnit(builder, stepTimeUnit):
    RangeGridAddStepTimeUnit(builder, stepTimeUnit)

def RangeGridAddBusinessDaysOnly(builder, businessDaysOnly):
    builder.PrependBoolSlot(4, businessDaysOnly, 0)

def AddBusinessDaysOnly(builder, businessDaysOnly):
    RangeGridAddBusinessDaysOnly(builder, businessDaysOnly)

def RangeGridAddCalendar(builder, calendar):
    builder.PrependInt8Slot(5, calendar, 21)

def AddCalendar(builder, calendar):
    RangeGridAddCalendar(builder, calendar)

def RangeGridAddBusinessDayConvention(builder, businessDayConvention):
    builder.PrependInt8Slot(6, businessDayConvention, 0)

def AddBusinessDayConvention(builder, businessDayConvention):
    RangeGridAddBusinessDayConvention(builder, businessDayConvention)

def RangeGridEnd(builder):
    return builder.EndObject()

def End(builder):
    return RangeGridEnd(builder)


class RangeGridT(object):

    # RangeGridT
    def __init__(self):
        self.startDate = None  # type: str
        self.endDate = None  # type: str
        self.stepNumber = 1  # type: int
        self.stepTimeUnit = 0  # type: int
        self.businessDaysOnly = False  # type: bool
        self.calendar = 21  # type: int
        self.businessDayConvention = 0  # type: int

    @classmethod
    def InitFromBuf(cls, buf, pos):
        rangeGrid = RangeGrid()
        rangeGrid.Init(buf, pos)
        return cls.InitFromObj(rangeGrid)

    @classmethod
    def InitFromPackedBuf(cls, buf, pos=0):
        n = flatbuffers.encode.Get(flatbuffers.packer.uoffset, buf, pos)
        return cls.InitFromBuf(buf, pos+n)

    @classmethod
    def InitFromObj(cls, rangeGrid):
        x = RangeGridT()
        x._UnPack(rangeGrid)
        return x

    # RangeGridT
    def _UnPack(self, rangeGrid):
        if rangeGrid is None:
            return
        self.startDate = rangeGrid.StartDate()
        self.endDate = rangeGrid.EndDate()
        self.stepNumber = rangeGrid.StepNumber()
        self.stepTimeUnit = rangeGrid.StepTimeUnit()
        self.businessDaysOnly = rangeGrid.BusinessDaysOnly()
        self.calendar = rangeGrid.Calendar()
        self.businessDayConvention = rangeGrid.BusinessDayConvention()

    # RangeGridT
    def Pack(self, builder):
        if self.startDate is not None:
            startDate = builder.CreateString(self.startDate)
        if self.endDate is not None:
            endDate = builder.CreateString(self.endDate)
        RangeGridStart(builder)
        if self.startDate is not None:
            RangeGridAddStartDate(builder, startDate)
        if self.endDate is not None:
            RangeGridAddEndDate(builder, endDate)
        RangeGridAddStepNumber(builder, self.stepNumber)
        RangeGridAddStepTimeUnit(builder, self.stepTimeUnit)
        RangeGridAddBusinessDaysOnly(builder, self.businessDaysOnly)
        RangeGridAddCalendar(builder, self.calendar)
        RangeGridAddBusinessDayConvention(builder, self.businessDayConvention)
        rangeGrid = RangeGridEnd(builder)
        return rangeGrid
